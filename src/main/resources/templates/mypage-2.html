<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="utf-8">
	<title>UKIDS | 회원정보 수정</title>
	<!-- Viewport-->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- Favicon and Touch Icons-->
	<link rel="apple-touch-icon" sizes="180x180" href="img/ukids/logo.jpg">
	<link rel="icon" type="image/png" sizes="32x32" href="img/ukids/logo.jpg">
	<link rel="icon" type="image/png" sizes="16x16" href="img/ukids/logo.jpg">
	<link rel="manifest" href="site.webmanifest">
	<link rel="mask-icon" color="#fe6a6a" href="safari-pinned-tab.svg">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="theme-color" content="#ffffff">
	<!-- Vendor Styles including: Font Icons, Plugins, etc.-->
	<link rel="stylesheet" media="screen" href="vendor/simplebar/dist/simplebar.min.css" />
	<link rel="stylesheet" media="screen" href="vendor/tiny-slider/dist/tiny-slider.css" />
	<link rel="stylesheet" media="screen" href="vendor/drift-zoom/dist/drift-basic.min.css" />
	<link rel="stylesheet" media="screen" href="vendor/lightgallery.js/dist/css/lightgallery.min.css" />
	<!-- Main Theme Styles + Bootstrap-->
	<link rel="stylesheet" media="screen" href="css/theme.min.css">
	<link rel="stylesheet" media="screen" href="css/cgw.css">
	<link rel="stylesheet" media="screen" href="css/header.css">
	<link rel="stylesheet" media="screen" href="css/footer.css">
	
	<!--jquery-->
	<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
	
	<!-- 폰트 -->
	<style>
	@font-face {
		font-family: 'NanumSquareRound';
		src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_two@1.0/NanumSquareRound.woff') format('woff');
		font-weight: normal;
		font-style: normal;
	}
	
	* {
		font-family: 'NanumSquareRound';
	}
	</style>

</head>

<!-- Body-->
<body class="handheld-toolbar-enabled">
	<!-- 로그인 모달 관련  -->
	<div th:fragment="modal" th:replace="~{common :: modal}"></div>

	<main class="page-wrapper" style="height: 2260px;">
		<!-- 헤더!!!!!! -->
		<header th:fragment="header" th:replace="~{common :: header}"></header>
		<!-- 헤더 끝 -->
		<!-- Page Title-->
		<div
			class="bg-position-top-center bg-repeat-0 bg-size-cover py-5 bg-dark-cgw">
			<div class="pt-0 pb-5">
				<div class="container pt-0  pt-lg-0">
					<div class="mb-3 mb-lg-0 pt-lg-0">
						<nav aria-label="breadcrumb">
							<ol
								class="breadcrumb breadcrumb-light fw-bold fs-md flex-lg-nowrap justify-content-center justify-content-lg-end">
								<li class="breadcrumb-item"><a class="text-nowrap"
									th:href="@{/}"><i class="ci-home"></i>유키즈</a></li>
								<li class="breadcrumb-item text-light">마이페이지</li>
								<li class="breadcrumb-item text-nowrap cgw3" aria-current="page">입소
									신청 조회</li>
							</ol>
						</nav>
					</div>
				</div>
			</div>
		</div>
		<div class="container pb-5 mb-2 mb-md-4 cgw1">
			<div class="row">
				<!-- Sidebar-->
				<aside class="col-lg-4 pt-4 pt-lg-0 pe-xl-5">
					<h1 class="h3 text-white cgw5">마이페이지</h1>
					<div class="bg-white rounded-3 shadow-lg pt-1 mb-5 mb-lg-0">
						<div
							class="d-md-flex justify-content-between align-items-center text-center text-md-start p-4">
							<div class="d-md-flex align-items-center">
								<div class="ps-md-3">
									<h3 class="fs-base mb-0">[[${session.loginMember.name}]]</h3>
									<span class="cgw3 fs-sm">[[${session.loginMember.email}]]</span>
								</div>
							</div>
							<a class="btn btn-primary d-lg-none mb-2 mt-3 mt-md-0"
								href="#account-menu" data-bs-toggle="collapse"
								aria-expanded="false"><i class="ci-menu me-2"></i>Account
								menu</a>
						</div>
						<div class="d-lg-block collapse" id="account-menu">
							<div class="bg-secondary px-4 py-3">
								<h3 class="fs-sm mb-0 text-muted">마이페이지</h3>
							</div>
							<ul class="list-unstyled mb-0">
                <li class="border-bottom mb-0"><a class="nav-link-style d-flex align-items-center px-4 py-3"
                    th:href="@{/mypage}"><i class="ci-user opacity-60 me-2"></i>회원정보 수정</a></li>
                <li class="border-bottom mb-0">
                  <div class="cgw3 d-flex align-items-center px-4 py-3"><i class="ci-edit opacity-60 me-2"></i>입소 신청
                    조회<span class="fs-sm text-muted ms-auto">1</span></div>
                </li>
                <li class="border-bottom mb-0"><a class="nav-link-style d-flex align-items-center px-4 py-3"
                    th:href="@{/mypage-3}"><i class="ci-heart opacity-60 me-2"></i>찜<span
                      class="fs-sm text-muted ms-auto">3</span></a></li>
                <li class="border-bottom mb-0"><a class="nav-link-style d-flex align-items-center px-4 py-3"
                    th:href="@{/mypage-4}"><i class="ci-edit opacity-60 me-2"></i>불편사항 신고 조회<span
                      class="fs-sm text-muted ms-auto">3</span></a></li>
                <li class="border-bottom mb-0"><a class="nav-link-style d-flex align-items-center px-4 py-3"
                    th:href="@{/mypage-5}"><i class="ci-document opacity-60 me-2"></i>내가 쓴 게시글<span
                      class="fs-sm text-muted ms-auto">3</span></a></li>
                <li class="border-bottom mb-0"><a class="nav-link-style d-flex align-items-center px-4 py-3"
                    th:href="@{/mypage-6}"><i class="ci-bag opacity-60 me-2"></i>대여 내역 조회<span
                      class="fs-sm text-muted ms-auto">3</span></a></li>
                <li class="border-bottom mb-0"><a class="nav-link-style d-flex align-items-center px-4 py-3"
                    th:href="@{/mypage-7}"><i class="ci-cart opacity-60 me-2"></i>장바구니<span
                      class="fs-sm text-muted ms-auto">3</span></a></li>
                <li class="border-bottom mb-0">
                  <div class="nav-link-style d-flex align-items-center px-4 py-2"><a
                      class="fs-sm ms-auto btn btn-logout btn-sm" href="#"><i class="ci-sign-out me-2"></i>로그아웃</a>
                  </div>
                </li>
              </ul>
						</div>
					</div>
				</aside>
				<!-- Content  -->
				<section class="col-lg-8">
					<!-- Toolbar-->
					<div class="d-none d-lg-flex justify-content-between align-items-center pb-4 cgw7 mb-lg-3">
						<h6 class="fs-change cgw4 mb-0 fw-bold" style="color: #fc6c93;">입소 신청 조회</h6>
					</div>
					<!-- 어린이집 입소 신청 목록-->
					<!-- <form id="enroll-container" action="/member/update" method="post"> -->
					<div class="table-responsive fs-md mb-4">
						<h5 class="v-line ps-2">어린이집 입소 신청 목록</h5>
						<br>
						<table class="table table-hover mb-0">
							<thead>
								<tr>
									<th class="cgw8 cgw9">번호</th>
									<th class="cgw8 cgw9">어린이집명</th>
									<th class="cgw8 cgw9">신청일자</th>
									<th class="cgw8 cgw9">입소희망 예정일</th>
									<th class="cgw8 cgw9">신청 상태</th>
									<th></th>
								</tr>
							</thead>
							<tbody>
								<th:block th:if="${nlist == null}">
									<tr>
										<td colspan="5">조회된 신청이 없습니다.</td>
									</tr>
								</th:block>
								<th:block th:if="${nlist != null}">
								<tr th:each="nadmission, stat : ${nlist}">
									<td class="py-3 cgw9" th:text="|${stat.count}|"></td>
									<td class="py-3 cgw9"><a
										class="nav-link-style-cgw fw-medium cgw26"
										href="account-single-ticket.html">[[${nadmission.crname}]]</a></td>
									<td class="py-3 cgw9" th:text="${#dates.format(nadmission.enrollDate, 'yyyy-MM-dd')}"></td>
									<td class="py-3 cgw9" th:text="${#dates.format(nadmission.hopeDate, 'yyyy-MM-dd')}"></td>
									<td class="py-3 cgw9">
										<span th:if="${nadmission.status == 'Y'}" class="badge bg-success m-0">입소확정</span>
										<span th:if="${nadmission.status == 'N'}" class="badge bg-danger m-0">신청실패</span>
										<span th:if="${nadmission.status == 'W'}" class="badge bg-info m-0">대기중</span>
									</td>
									<td class="py-3 cgw9">
										<button class="cgw30 badge-cgw1 bg-secondary-cgw1 m-0" id="deleteNAdmission" th:if="${nadmission.status != 'Y'}" >
											<span>입소신청취소</span>
										</button>
										<span th:if="${nadmission.status == 'Y'}" class="badge-cgw2 bg-secondary m-0">입소취소불가</span>
									</td>
								</tr>
								<div id="nAdmissionListContent"></div>
								</th:block>
							</tbody>
						</table>
					</div>
					<div class="text-end">
						<button class="btn btn-primary-cgw2" data-bs-toggle="modal"
							 onclick="getNAdmissionList()">더보기</button>
						<script type="text/javascript">
						function getNAdmissionList(){
							  id = $('#timeline_moimId').val();

							  var callLength = $('.postHeader').length; //시작 인덱스
							  var limit = 3; // 더보기 누를때마다 나타낼 카드수

							  $.ajax({
							    url: '/moimDetail/moimTodoList/boardTimelineMore/'+id,
							    contentType: "application/json; charset=utf-8",
							    dataType:'json',
							    processData: false, //데이터를 쿼리 문자열로 변환하는 jQuery 형식 방지
							    success:function(data){
							      	if(data.code==1){
							            var board = data.boardList;
							            var planTitle = data.planTitle
							            var timehtml = "";

							            var max = board.length-callLength;
							            var min = max-limit;
							            if(min<=0){
							              min= 0;
							              $("#moreBtn").hide();
							              $("#endMark").show();
							            }

							            //alert("board.length: "+board.length+" /max :"+max+" /min: "+ min);

							            for(var i=max-1; i>=min; i--){
							                  timehtml+="<div class='card gedf-card postCard' style='width: 950px; height: auto;'>";
							                  timehtml+='<div class="card-header postHeader">'
							                  timehtml+='<div class="d-flex justify-content-between align-items-center">'
							                  timehtml+='<div class="d-flex justify-content-between align-items-center">'
							                  timehtml+='<div class="mr-2">'
							                  timehtml+='<img class="rounded-circle" width="45" src="https://picsum.photos/50/50">'
							                  timehtml+='</div>'
							                  timehtml+='<div class="ml-2">'
							                  timehtml+='<div class="h5 m-0">'+board[i].people.name+'</div>'
							                  timehtml+='<div class="h7 text-muted">Miracles Lee Cross</div>'
							                  timehtml+='</div>'
							                  timehtml+='</div>'
							                  timehtml+='</div>'
							                  timehtml+='</div>'
							                  timehtml+='<div class="card-body">'
							                  timehtml+='<div class="text-muted h7 mb-2"><i class="fa fa-clock-o"></i>'+board[i].createDate+'</div>'
							                  timehtml+='<a class="card-link" href="#">'
							                  timehtml+='<h5 class="card-title">'+board[i].toDoWriteList.toDoWrite.plan_title+'</h5>'
							                  timehtml+='<h6 class="card-title">'+board[i].title+'</h6></a>'
							                  timehtml+='<p class="card-text">'+board[i].memo+'</p></div>'
							                  timehtml+='<div class="card-footer"><a href="#" class="card-link"><i class="fa fa-gittip"></i> Like</a><a href="#" class="card-link">'
							                  timehtml+='<i class="fa fa-mail-forward"></i> Share</a></div>'
							                  timehtml+='<input type="hidden" id="timeline_moimId" th:value="'+board[i].moim.id+'"/>'
							                  timehtml+='</div>'
							            }//for
							            alert("result : " + timehtml);
							            $("#postWrapper .postCard:last").after(timehtml);
							        }else{
							          alert(data.code);
							        }
							    },error:function(e){
							      alert(data.code);
							      alert(data.message);
							    }
							  });
							}
						</script>
					</div>
					<!-- </form> -->
					<br>
					<br>
					<!-- 유치원 목록-->
					<!-- <form id="enroll-container" action="/member/update" method="post"> -->
					<div class="table-responsive fs-md mb-4">
						<h5 class="v-line ps-2">유치원 입소 신청 목록</h5>
						<br>
						<table class="table table-hover mb-0">
							<thead>
								<tr>
									<th class="cgw8 cgw9">번호</th>
									<th class="cgw8 cgw9">유치원명</th>
									<th class="cgw8 cgw9">신청일자</th>
									<th class="cgw8 cgw9">입소희망 예정일</th>
									<th class="cgw8 cgw9s">신청 상태</th>
									<th></th>
								</tr>
							</thead>
							<tbody>
								<th:block th:if="${klist == null}">
									<tr>
										<td colspan="5">조회된 신청이 없습니다.</td>
									</tr>
								</th:block>
								<th:block th:if="${klist != null}">
								<tr th:each="kadmission, stat : ${klist}">
									<td class="py-3 cgw9" th:text="|${stat.count}|"></td>
									<td class="py-3 cgw9"><a class="nav-link-style-cgw fw-medium cgw26"
										href="account-single-ticket.html">[[${kadmission.kinderName}]]</a></td>
									<td class="py-3 cgw9" th:text="${#dates.format(kadmission.enrollDate, 'yyyy-MM-dd')}"></td>
									<td class="py-3 cgw9" th:text="${#dates.format(kadmission.hopeDate, 'yyyy-MM-dd')}"></td>
									<td class="py-3 cgw9">
										<span th:if="${kadmission.status == 'Y'}" class="badge bg-success m-0">입소확정</span>
										<span th:if="${kadmission.status == 'N'}" class="badge bg-danger m-0">신청실패</span>
										<span th:if="${kadmission.status == 'W'}" class="badge bg-info m-0">대기중</span>
									</td>
									<td class="py-3 cgw9">
										<button class="cgw30 badge-cgw1 bg-secondary-cgw1 m-0" id="deleteKAdmission" th:if="${kadmission.status != 'Y'}" >
											<span>입소신청취소</span>
										</button>
										<span th:if="${kadmission.status == 'Y'}" class="badge-cgw2 bg-secondary m-0">입소취소불가</span>
									</td>
								</tr>
								</th:block>
							</tbody>
						</table>
					</div>
					<div class="text-end">
						<button class="btn btn-primary-cgw2" data-bs-toggle="modal"
							data-bs-target="#open-ticket">더보기</button>
					</div>
					<!-- </form> -->
				</section>
			</div>
		</div>
	</main>
	<!-- 푸터!!!!!!!!!!-->
	<!-- Footer-->
	<footer th:fragment="footer" th:replace="~{common :: footer}"></footer>




	<!-- Toolbar for handheld devices (Default)-->
	<!-- Back To Top Button-->
	<!-- Vendor scrits: js libraries and plugins-->
	<script src="vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
	<script src="vendor/simplebar/dist/simplebar.min.js"></script>
	<script src="vendor/tiny-slider/dist/min/tiny-slider.js"></script>
	<script src="vendor/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
	<script src="vendor/drift-zoom/dist/Drift.min.js"></script>
	<script src="vendor/lightgallery.js/dist/js/lightgallery.min.js"></script>
	<script src="vendor/lg-video.js/dist/lg-video.min.js"></script>

	<script src="vendor/flatpickr/dist/flatpickr.min.js"></script>
	<script src="vendor/flatpickr/dist/plugins/rangePlugin.js"></script>
	<!-- Main theme script-->
	<script src="js/theme.min.js"></script>
	<script>
		$(document).ready(() => {
			$("#deleteKAdmission").on("click", (e) => {
				if(confirm("정말로 입소신청을 취소 하시겠습니까?")) {
					location.replace("/mypage-2");
				}
			});
			
		});
	</script>
</body>

</html>